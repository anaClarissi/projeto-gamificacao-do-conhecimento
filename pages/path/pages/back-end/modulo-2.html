<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Módulo 2 — Introdução ao Node.js</title>
    
    <!-- Swiper -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@12/swiper-bundle.min.css"/>

    <!-- JQuery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"/>

    <!-- Google Fonts Icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" />

    <!-- CSS do módulo -->
    <link rel="stylesheet" href="../../css/modulo.css">

</head>

<body>

    <header>
        <nav id="nav-bar">
            <span id="nav-logo">
                <img src="" alt="" >
                Informática Manhã
            </span>

            <ul id="nav-list">
                <li class="nav-item"><a href="../../../landing/home.html#home">Início</a></li>
                <li class="nav-item active"><a href="../../../landing/home.html#path">Trilhas</a></li>
                <li class="nav-item"><a href="../../../landing/home.html#profession">Profissões</a></li>
                <li class="nav-item"><a href="../../../landing/home.html#quizzes">Quizzes</a></li>
                <li class="nav-item"><a href="../../../landing/home.html#games">Jogos</a></li>
            </ul>

            <button class="btn-default user">
                <i class="fa-solid fa-user"></i>
                <span class="user-name">Área do Aluno</span>
            </button>

            <button id="mobile-btn"><i class="fa-solid fa-bars"></i></button>
        </nav>

        <div id="user-menu">
            <ul id="user-nav-list">
                <li class="user-item"><a href="">Conquistas</a></li>
                <li class="user-item"><a href="">Pontos</a></li>
                <li class="user-item"><a href="">Minha Conta</a></li>
                <li class="user-item"><a href="">Sair</a></li>
            </ul>
        </div>

        <div id="mobile-menu">
            <ul id="mobile-nav-list">
                <li class="nav-item"><a href="../../../landing/home.html#home">Início</a></li>
                <li class="nav-item"><a href="../../../landing/home.html#path">Trilhas</a></li>
                <li class="nav-item"><a href="../../../landing/home.html#profession">Profissões</a></li>
                <li class="nav-item"><a href="../../../landing/home.html#quizzes">Quizzes</a></li>
                <li class="nav-item"><a href="../../../landing/home.html#games">Jogos</a></li>
            </ul>
        </div>
    </header>

    <main class="module-container">

        <div class="module-header">
            <img class="module-image" src="../../../landing/images/path/back-end.svg" alt="">
            <h1 class="section-title">Back-End</h1>
        </div>

        <section class="module-type">
            <h1 class="section-subtitle">Módulo 2 — Introdução ao Node.js</h1>
            <p class="module-description">
                Neste módulo, você aprenderá a criar um servidor básico com Node.js, manipular requisições HTTP e trabalhar com objetos JSON.
                Todos os exemplos são passo a passo para que você consiga praticar e completar os exercícios.
            </p>
        </section>

        <section class="module-arrows">
            <a href="modulo-1.html">
                <div class="area-arrows">
                    <img src="../../imagens/arrow_back_ios_25dp_46FFA8_FILL0_wght400_GRAD0_opsz24.svg" alt="" class="arrows">
                </div>
            </a>

            <a href="modulo-3.html">
                <div class="area-arrows">
                    <img src="../../imagens/arrow_forward_ios_25dp_46FFA8_FILL0_wght400_GRAD0_opsz24.svg" alt="" class="arrows">
                </div>
            </a>
        </section>

        <!-- Conteúdo do módulo -->
        <section class="module-section">
            <h2>1. O que é Node.js</h2>
            <p>
                Node.js é uma plataforma que permite executar JavaScript no servidor. Com ela, podemos criar servidores, manipular arquivos, bancos de dados e APIs.
                É muito usada para criar aplicações web completas.
            </p>
            <pre class="area-tags"><p class="pequeno">node.js</p><code>const http = require('http');</code></pre>
        </section>

        <section class="module-section">
            <h2>2. Criando um servidor simples</h2>
            <p>Exemplo de servidor que responde "Olá Mundo":</p>
            <pre class="area-tags"><p class="pequeno">node.js</p><code> 
    const http = require('http');

    const server = http.createServer((req, res) =&gt; {
        res.writeHead(200, {'Content-Type': 'text/plain'});
        res.end('Olá Mundo!');
    });

    server.listen(3000, () =&gt; console.log('Servidor rodando na porta 3000'));
            </code></pre>
            <p>Este código permite acessar <code>http://localhost:3000</code> no navegador e ver a mensagem "Olá Mundo!".</p>
        </section>

        <section class="module-section">
            <h2>3. Trabalhando com JSON</h2>
            <p>JSON é o formato de dados mais usado para comunicação entre cliente e servidor.</p>
            <pre class="area-tags"><p class="pequeno">node.js</p><code>
    const usuario = {
        nome: "Ana",
        idade: 16,
        curso: "Back-End"
    };

    console.log(JSON.stringify(usuario));
            </code></pre>
            <p>Este exemplo transforma o objeto JavaScript em uma string JSON.</p>
        </section>

        <section class="module-section">
            <h2>4. Rotas e requisições</h2>
            <p>Nos servidores, cada caminho é chamado de rota. Exemplo simples de rota:</p>
            <pre class="area-tags"><p class="pequeno">node.js</p><code>
    const http = require('http');

    const server = http.createServer((req, res) =&gt; {
        if(req.url === '/usuarios') {
            res.writeHead(200, {'Content-Type': 'application/json'});
            res.end(JSON.stringify([{nome: "Ana"}, {nome: "Pedro"}]));
        } else {
            res.writeHead(404);
            res.end('Página não encontrada');
        }
    });

    server.listen(3000);
            </code></pre>
        </section>

        <section class="module-section">
            <h2>5. Introdução a bancos de dados</h2>
            <p>Exemplo de consulta simulada usando array de objetos:</p>
            <pre class="area-tags"><p class="pequeno">node.js</p><code>
    const usuarios = [
        {id: 1, nome: "Ana"},
        {id: 2, nome: "Pedro"}
    ];

    const usuario = usuarios.find(u =&gt; u.id === 2);
    console.log(usuario.nome); // Pedro
            </code></pre>
            <p>Isso prepara o aluno para usar bancos de dados reais em módulos futuros.</p>
        </section>

        <!-- Exercícios -->
        <section id="coding-questions">
        </section>

        <section class="module-arrows">
            <a href="modulo-1.html">
                <div class="area-arrows">
                    <img src="../../imagens/arrow_back_ios_25dp_46FFA8_FILL0_wght400_GRAD0_opsz24.svg" alt="" class="arrows">
                </div>
            </a>

            <a href="modulo-3.html">
                <div class="area-arrows">
                    <img src="../../imagens/arrow_forward_ios_25dp_46FFA8_FILL0_wght400_GRAD0_opsz24.svg" alt="" class="arrows">
                </div>
            </a>
        </section>

    </main>

    <footer>
        <img src="../../../landing/images/footer/wave.svg" alt="">
        <div id="footer-items">
            <span>&copy 2025 Ana Clarissi</span>
            <div class="social-media-buttons">
                <a href=""><i class="fa-brands fa-whatsapp"></i></a>
                <a href=""><i class="fa-brands fa-instagram"></i></a>
                <a href=""><i class="fa-brands fa-facebook"></i></a>
            </div>
        </div>
    </footer>

    <script src="../../../landing/js/usuario.js"></script>
    <script src="../../../landing/js/script.js"></script>

    <script>
    const codingExercises = [
        {
            id: 1,
            title: "Criar um servidor básico",
            description: "Crie um servidor Node.js que responda 'Olá Mundo' na porta 3000.",
            expected: `
            const http = require('http');
            const server = http.createServer((req, res) => {
                res.writeHead(200, {'Content-Type': 'text/plain'});
                res.end('Olá Mundo!');
            });
            server.listen(3000);
                    `
                },
                {
                    id: 2,
                    title: "Objeto JSON",
                    description: "Crie um objeto chamado 'usuario' com 'nome', 'idade' e 'curso', e mostre no console em formato JSON.",
                    expected: `
            const usuario = { nome: "Ana", idade: 16, curso: "Back-End" };
            console.log(JSON.stringify(usuario));
                    `
                },
                {
                    id: 3,
                    title: "Rota /usuarios",
                    description: "Crie uma rota '/usuarios' que retorne uma lista de usuários em JSON.",
                    expected: `
            const http = require('http');
            const server = http.createServer((req, res) => {
                if(req.url === '/usuarios') {
                    res.writeHead(200, {'Content-Type': 'application/json'});
                    res.end(JSON.stringify([{nome: "Ana"}, {nome: "Pedro"}]));
                } else {
                    res.writeHead(404);
                    res.end('Página não encontrada');
                }
            });
            server.listen(3000);
                    `
                },
            ];

        const renderExercises = () => {
            const container = document.getElementById("coding-questions");
            codingExercises.forEach(ex => {
                container.innerHTML += `
                    <div class="exercise-box">
                        <h3>${ex.id}. ${ex.title}</h3>
                        <p>${ex.description}</p>
                        <textarea id="answer-${ex.id}" placeholder="Escreva seu código aqui..."></textarea>
                        <button class="btn-default" onclick="checkAnswer(${ex.id})">Verificar Resposta</button>
                        <div id="result-${ex.id}" class="result"></div>
                    </div>
                `;
            });
        }

        const normalizeCode = (code) => {
            if (!code) return "";
            code = code.replace(/\/\*[\s\S]*?\*\//g, "").replace(/\/\/.*$/gm, "");
            code = code.replace(/\r\n/g, "\n").replace(/\n+/g, " ").replace(/\s+/g, " ").trim();
            code = code.replace(/\s*([\=\+\-\*\/%<>!,\:\(\)\{\}\[\]\|&])\s*/g, "$1");
            code = code.replace(/;+/g, "");
            return code;
        }

        const checkAnswer = (id) => {
            const question = codingExercises.find(q => q.id === id);
            const studentRaw = document.getElementById(`answer-${id}`).value || "";
            const studentNormalized = normalizeCode(studentRaw);
            const expectedNormalized = normalizeCode(question.expected);
            const resultBox = document.getElementById(`result-${id}`);
            if (studentNormalized === expectedNormalized) {
                resultBox.innerHTML = "<span class='correct'>✔ Correto!</span>";
            } else {
                resultBox.innerHTML = `
                    <span class='wrong'>✘ Resposta incorreta</span>
                    <br><strong>Exemplo esperado (formatado):</strong>
                    <pre style="white-space:pre-wrap; background:#f7f7f7; padding:8px; border-radius:4px;">${question.expected.replace(/</g, "&lt;")}</pre>
                    <details><summary>O que foi enviado (normalizado)</summary><pre style="white-space:pre-wrap;">${studentNormalized.replace(/</g,"&lt;")}</pre></details>
                `;
            }
        }

        renderExercises();
    </script>

</body>
</html>
